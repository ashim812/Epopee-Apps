<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product/Price Decoder with Currency Converter</title>
  <style>
    /* THEME TOKENS */
    :root { --bg:#0b0e13; --card:#121722; --text:#e7ecf3; --muted:#9fb0c3; --accent:#6ee7ff; --ok:#7ef1a0; --warn:#ffcc66; --bad:#ff6b6b; --btn1a:#1f2a44; --btn1b:#152039; --red1:#ff4d4d; --red2:#cc0000; --red1h:#ff6666; --red2h:#e60000; --shadow:0 20px 60px rgba(0,0,0,.35); --stroke:rgba(255,255,255,.08); --pillbg:rgba(255,255,255,.03); --pillstroke:rgba(255,255,255,.12); --bg-grad1:#1a2233; --bg-grad2:#0b0e13; }
    body.light { --bg:#f6f8fb; --card:#ffffff; --text:#0f172a; --muted:#5b6b7c; --accent:#0ea5e9; --ok:#10b981; --warn:#f59e0b; --bad:#ef4444; --btn1a:#e8eef7; --btn1b:#dde6f3; --red1:#ef5350; --red2:#c62828; --red1h:#ff6f6b; --red2h:#d32f2f; --shadow:0 12px 30px rgba(15, 23, 42, .12); --stroke:rgba(2,6,23,.08); --pillbg:rgba(2,6,23,.04); --pillstroke:rgba(2,6,23,.08); --bg-grad1:#f0f4f8; --bg-grad2:#e6edf5; }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:radial-gradient(1200px 600px at 80% -10%, var(--bg-grad1) 0, var(--bg-grad2) 50%), var(--bg); color:var(--text); display:grid; place-items:center; transition:background .3s ease, color .2s ease}
    
    .main-wrapper { display: flex; align-items: flex-start; justify-content: center; flex-wrap: wrap; gap: 10px; padding: 1vw; width: 100%;}
    
    /* Decoder & General Styles */
    .container{width:min(700px,95vw); background:var(--card); border:1px solid var(--stroke); border-radius:20px; padding:15px; box-shadow:var(--shadow); flex: 1 1 500px;}
    .container h1{text-align:center; font-size:clamp(20px,2.6vw,28px); margin:16px 0;}
    .container label{display:block; font-size:13px; color:var(--muted); margin-bottom:6px}
    .container input{width:100%; background:transparent; border:1px solid var(--stroke); border-radius:12px; padding:12px; outline:none; color:var(--text); font-size:18px; font-weight:600; margin-bottom:10px}
    .container button{appearance:none; border:none; padding:12px 18px; border-radius:12px; font-weight:700; cursor:pointer; border:1px solid rgba(0,0,0,.08)}
    .container .btn-decode{background:linear-gradient(180deg, var(--btn1a), var(--btn1b)); color:var(--accent); margin-top:8px; width:100%}
    .container .btn-decode:hover{filter:brightness(1.1)}
    .container .btn-refresh{background:linear-gradient(180deg, var(--red1), var(--red2)); color:#fff; display:block; margin:20px auto; width:103px}
    .container .btn-refresh:hover{background:linear-gradient(180deg, var(--red1h), var(--red2h));}
    .container .output{margin-top:12px; padding:14px; background:var(--pillbg); border:1px solid var(--pillstroke); border-radius:12px; font-size:14px}
    .container hr{border:none; border-top:1px solid var(--stroke); margin:24px 0}
    .grid{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    .discount-calculator {max-height: 320px;}

    /* Currency Converter Styles */
    .wrap{width:min(760px, 92vw); flex: 1 1 500px;} 
    .card{background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01)); border:1px solid var(--stroke); border-radius:20px; padding:24px; box-shadow:var(--shadow)}
    .card h1{font-weight:700; font-size:clamp(20px, 2.6vw, 28px); margin:0 0 4px}
    .topbar{display:flex; justify-content:space-between; align-items:center;}
    p.sub{color:var(--muted); margin:0 0 16px}
    .row{display:flex; gap:12px; align-items:center; margin:14px 0}
    .field{flex:1; background:var(--card); border:1px solid var(--stroke); border-radius:16px; padding:14px; position:relative}
    .card label{display:block; font-size:12px; color:var(--muted); letter-spacing:.3px; margin-bottom:6px}
    .card input{width:100%; background:transparent; border:none; outline:none; color:var(--text); font-size:22px; font-weight:600}
    .rate{display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:10px; color:var(--muted)}
    .pill{border:1px solid var(--pillstroke); background:var(--pillbg); padding:6px 10px; border-radius:999px; font-size:12px}
    .meta {display:flex; justify-content:space-between; align-items:center; margin-top:14px; color:var(--muted); font-size:13px}
    .rate .right {margin-left:auto;}
    .btn{appearance:none; border:none; background:linear-gradient(180deg, var(--btn1a), var(--btn1b)); color:#0ea5e9; padding:10px 14px; border-radius:12px; font-weight:700; cursor:pointer; border:1px solid var(--stroke)}
    .btn:disabled{opacity:.6; cursor:default}
    .card .btn-refresh{background:linear-gradient(180deg, var(--red1), var(--red2)); color:#fff; border:1px solid rgba(0,0,0,.08);} 
    .card .btn-refresh:hover{background:linear-gradient(180deg, var(--red1h), var(--red2h));}
    .footer{margin-top:14px; font-size:12px; color:var(--muted)}
    #statusDot{width:10px;height:10px;border-radius:50%;background:var(--warn); display:inline-block; vertical-align:middle; margin-right:6px}
    .dropdown { position: relative; max-width: 280px; }
    .dropdown input { width:100%; padding:6px; font-size:14px; }
    .dropdown-list { position:absolute; top:100%; left:0; right:0; max-height:200px; overflow-y:auto; background:var(--card); border:1px solid var(--stroke); border-radius:8px; display:none; z-index:10; font-size:14px; }
    .dropdown-list div { padding:6px 10px; cursor:pointer; font-size:14px; }
    .dropdown-list div:hover { background:rgba(255,255,255,0.1); }

    /* Neumorphic style toggle */
    .theme-toggle { position:relative; display:inline-block; width:60px; height:38px; border-radius:30px; background:#e6e9ef; box-shadow:inset 4px 4px 8px #c2c5cc, inset -4px -4px 8px #fff; cursor:pointer; transition:background .3s ease; overflow:hidden; }
    body.dark .theme-toggle { background:#2c3140; box-shadow:inset 4px 4px 8px #212531, inset -4px -4px 8px #383f4f; }
    .toggle-circle { position:absolute; top:4px; left:4px; width:30px; height:30px; border-radius:50%; background:#fff; display:flex; align-items:center; justify-content:center; font-size:20px; color:#f39c12; box-shadow:2px 2px 5px rgba(0,0,0,0.2); transition:all .3s ease; z-index:2; }
    body.dark .toggle-circle { transform:translateX(22px); background:#3a3f51; color:#f1f1f1; }
  </style>
</head>
<body>
<div class="main-wrapper">
    <div class="container">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
            <h1>Product & Price ID Decoder</h1>
            <div class="theme-toggle" id="themeToggle">
            <div class="toggle-circle">☀</div>
            </div>
        </div>

        <form onsubmit="return false;">
            <label for="productCode">Product Code:</label>
            <input type="text" id="productCode" placeholder="Enter Product Code" style="text-transform: uppercase;">
            <p style="font-size:0.75em;color:var(--muted)">*The product code must have 'E' at the end for decoding accurately.</p>
            <button type="button" class="btn-decode" onclick="decodeProductCode()">DECODE PRODUCT</button>
        </form>

        <div id="productResult" class="output"></div>

        <hr>

        <form onsubmit="return false;">
            <label for="priceCode">Price Code:</label>
            <input type="text" id="priceCode" placeholder="Enter Price Code" style="text-transform: uppercase;">
            <button type="button" class="btn-decode" onclick="decodePriceCode()">DECODE PRICE</button>
        </form>

        <div id="priceResult" class="output"></div>

        <button class="btn-refresh" onclick="location.reload()">Refresh &#x21BB</button>
    </div>

    <div style="display: flex; flex-direction: column; flex: 1 1 500px; width:min(760px, 92vw); gap: 10px;">
        <div class="container discount-calculator">
            <h1>Discount Calculator</h1>
            <form onsubmit="return false;">
                <div class="grid">
                    <div>
                        <label for="originalPrice">Original Price (₹):</label>
                        <input type="number" id="originalPrice" placeholder="0.00" oninput="updateChain()" inputmode="decimal" min="0" step="any">
                    </div>
                    <div>
                        <label for="discountPercentage">Discount (%):</label>
                        <input type="number" id="discountPercentage" value="0" oninput="updateChain()" inputmode="decimal" min="0" max="100" step="any">
                    </div>
                </div>
                <button type="button" class="btn-decode" onclick="updateChain()">CALCULATE DISCOUNT</button>
            </form>
            <div id="discountResult" class="output"></div>
        </div>
        
        <div class="wrap" style="width: 100%;">
            <div class="card">
              <div class="topbar">
                <div>
                  <h1>INR → Currency Converter</h1>
                  <p class="sub">Exchange Rates auto-update every 60 secs</p>
                </div>
              </div>
        
              <div class="grid">
                <div class="field">
                  <label>Amount in INR (₹)</label>
                  <input id="inr" type="number" inputmode="decimal" placeholder="0.00" min="0" step="any">
                </div>
                <div class="field">
                  <label>Convert To</label>
                  <div class="dropdown">
                    <input id="currencySearch"><div id="currencyList" class="dropdown-list"></div>
                  </div>
                </div>
              </div>
        
              <div class="row">
                <div class="field">
                  <label>Estimated Amount in <span id="currencyLabel">—</span></label>
                  <input id="converted" type="number" inputmode="decimal" placeholder="0.00" min="0" step="any">
                </div>
              </div>
        
              <div class="rate" id="rateRow">
                <span class="pill" id="r1">—</span>
                <span class="pill" id="r2">—</span>
                <span class="pill" id="src">Source: —</span>
                <div class="right">
                  <button id="refresh" class="btn btn-refresh"> Rates &#x21BB </button>
                </div>
              </div>
        
              <div class="meta">
                <div><span id="statusDot"></span><span id="status">Fetching live rate…</span></div>
                  <div class="footer">
                    <div>Updated: <span id="updated">—</span></div>
                  </div>
              </div>
          </div>
        </div>
    </div>
</div>

<script>
  // --- Start of ID Decoder, Calculator and Theme Toggle Script ---
  const themeToggle=document.getElementById('themeToggle');
  const circle=themeToggle.querySelector('.toggle-circle');
  const savedTheme=localStorage.getItem('theme');
  const prefersLight=window.matchMedia&&window.matchMedia('(prefers-color-scheme: light)').matches;
  function applyTheme(t){document.body.classList.toggle('light',t==='light');document.body.classList.toggle('dark',t==='dark');circle.textContent=(t==='light')?'☀':'☾';localStorage.setItem('theme',t);} 
  applyTheme(savedTheme?savedTheme:(prefersLight?'light':'dark'));
  themeToggle.addEventListener('click',()=>{if(document.body.classList.contains('light')){applyTheme('dark');}else{applyTheme('light');}});

  function decodeProductCode(){const code=document.getElementById('productCode').value.trim().toUpperCase();if(!code||code.length<5){alert('Please enter a valid product code.');return;}const productCodes={'R':'Ring','E':'Earring','B':'Bangle','N':'Necklace','T':'Tops','C':'Cuffling','L':'Bracelet','P':'Pendent','H':'Brooch','W':'Crown'};const monthCodes=['January','February','March','April','May','June','July','August','September','October','November','December'];const yearCodes=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];const product=productCodes[code[0]]||'Unknown Product';const month=monthCodes[code[1].charCodeAt(0)-'A'.charCodeAt(0)]||'Unknown Month';const year=yearCodes.includes(code[2])?2025+yearCodes.indexOf(code[2]):'Unknown Year';const slno=code.slice(3,-1);const resultDiv=document.getElementById('productResult');resultDiv.style.display='block';resultDiv.innerHTML=`<strong>Product:</strong> ${product}<br><strong>Serial Number:</strong> ${slno}<br><strong>Manufactured Month:</strong> ${month}<br><strong>Manufactured Year:</strong> ${year}`;}

  const encodingMap={1:'B',2:'R',3:'I',4:'J',5:'M',6:'O',7:'H',8:'A',9:'N',0:'X'};
  const decodingMap=Object.fromEntries(Object.entries(encodingMap).map(([k,v])=>[v,k]));
  function decodingPrice(code){let decoded=code;for(const[k,v]of Object.entries(decodingMap)){decoded=decoded.replace(new RegExp(k,'g'),v);}return decoded;}
  
  function decodePriceCode(){
    const code=document.getElementById('priceCode').value.trim().toUpperCase();
    if(!code||!/^[A-Z]+$/.test(code)||![...code].every(c=>decodingMap.hasOwnProperty(c))){alert('Please enter a valid price code.');return;}
    const decodedPrice=decodingPrice(code);
    const approxPrice=(parseInt(decodedPrice)*1000)+1000;
    document.getElementById('priceResult').innerHTML=`<strong>APPROXIMATE Price:</strong> ₹${approxPrice.toLocaleString('en-IN')}`;
    
    // Auto-populate original price and trigger the calculation chain
    document.getElementById('originalPrice').value = approxPrice;
    updateChain();
  }

  function calculateDiscount() {
    const originalPriceEl = document.getElementById('originalPrice');
    const discountPercentageEl = document.getElementById('discountPercentage');
    const resultDiv = document.getElementById('discountResult');

    const originalPrice = parseFloat(originalPriceEl.value);
    const discountPercentage = parseFloat(discountPercentageEl.value);

    if (isNaN(originalPrice) || originalPrice < 0 || isNaN(discountPercentage) || discountPercentage < 0 || discountPercentage > 100) {
        resultDiv.style.display = 'none';
        resultDiv.innerHTML = '';
        return null;
    }

    const amountSaved = originalPrice * (discountPercentage / 100);
    const discountedPrice = originalPrice - amountSaved;

    resultDiv.style.display = 'block';
    resultDiv.innerHTML = `<strong>Discounted Price:</strong> ₹${discountedPrice.toLocaleString('en-IN', {minimumFractionDigits: 2, maximumFractionDigits: 2})}<br><strong>You Save:</strong> ₹${amountSaved.toLocaleString('en-IN', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
    
    return discountedPrice;
  }
  
  function updateChain() {
    const discountedPrice = calculateDiscount();
    
    if (discountedPrice !== null) {
      const inrInputElement = document.getElementById('inr');
      inrInputElement.value = discountedPrice.toFixed(2);
      inrInputElement.dispatchEvent(new Event('input'));
    }
  }
  // --- End of Script ---


  // --- Start of Currency Converter Script ---
  (() => {
    const inrEl = document.getElementById('inr');
    const convertedEl = document.getElementById('converted');
    const currencySearch = document.getElementById('currencySearch');
    const currencyList = document.getElementById('currencyList');
    const currencyLabel = document.getElementById('currencyLabel');
    const r1El = document.getElementById('r1');
    const r2El = document.getElementById('r2');
    const srcEl = document.getElementById('src');
    const statusEl = document.getElementById('status');
    const dotEl = document.getElementById('statusDot');
    const updatedEl = document.getElementById('updated');
    const refreshBtn = document.getElementById('refresh');

    let rateINRtoTarget = null;
    let targetCurrency = 'USD';
    let symbols = {};

    const currencySymbols = {
        AED:"د.إ", AFN:"؋", ALL:"L", AMD:"֏", ANG:"ƒ", AOA:"Kz", ARS:"$", AUD:"A$", AWG:"ƒ", AZN:"₼", BAM:"KM", BBD:"Bds$", BDT:"৳", BGN:"лв", BHD:"ب.د", BIF:"FBu", BMD:"$", BND:"B$", BOB:"Bs.", BRL:"R$", BSD:"B$", BTN:"Nu.", BWP:"P", BYN:"Br", BZD:"BZ$", CAD:"C$", CDF:"FC", CHF:"CHF", CLP:"CLP$", CNY:"¥", COP:"COL$", CRC:"₡", CUP:"₱", CVE:"Esc", CZK:"Kč", DJF:"Fdj", DKK:"kr", DOP:"RD$", DZD:"دج", EGP:"ج.م", ERN:"Nfk", ETB:"Br", EUR:"€", FJD:"FJ$", FKP:"£", FOK:"kr", GBP:"£", GEL:"₾", GGP:"£", GHS:"₵", GIP:"£", GMD:"D", GNF:"FG", GTQ:"Q", GYD:"G$", HKD:"HK$", HNL:"L", HRK:"kn", HTG:"G", HUF:"Ft", IDR:"Rp", ILS:"₪", IMP:"£", INR:"₹", IQD:"ع.د", IRR:"﷼", ISK:"kr", JEP:"£", JMD:"J$", JOD:"د.ا", JPY:"¥", KES:"KSh", KGS:"сом", KHR:"៛", KID:"K$", KMF:"CF", KRW:"₩", KWD:"د.ك", KYD:"CI$", KZT:"₸", LAK:"₭", LBP:"ل.ل", LKR:"Rs", LRD:"L$", LSL:"L", LYD:"ل.د", MAD:"د.м.", MDL:"L", MGA:"Ar", MKD:"ден", MMK:"K", MNT:"₮", MOP:"MOP$", MRU:"UM", MUR:"₨", MVR:"Rf", MWK:"MK", MXN:"Mex$", MYR:"RM", MZN:"MT", NAD:"N$", NGN:"₦", NIO:"C$", NOK:"kr", NPR:"₨", NZD:"NZ$", OMR:"р.ع.", PAB:"B/.", PEN:"S/.", PGK:"K", PHP:"₱", PKR:"₨", PLN:"zł", PYG:"₲", QAR:"р.ق", RON:"lei", RSD:"дин.", RUB:"₽", RWF:"FRw", SAR:"р.с", SBD:"SI$", SCR:"₨", SDG:"ج.س.", SEK:"kr", SGD:"S$", SHP:"£", SLE:"Le", SLL:"Le", SOS:"Sh.So.", SRD:"SRD$", SSP:"£", STN:"Db", SYP:"£S", SZL:"E", THB:"฿", TJS:"SM", TMT:"T", TND:"د.ت", TOP:"T$", TRY:"₺", TTD:"TT$", TVD:"T$", TWD:"NT$", TZS:"TSh", UAH:"₴", UGX:"USh", USD:"$", UYU:"$U", UZS:"so'm", VES:"Bs.S", VND:"₫", VUV:"VT", WST:"T", XAF:"FCFA", XCD:"EC$", XDR:"SDR", XOF:"CFA", XPF:"₣", YER:"﷼", ZAR:"R", ZMW:"ZK", ZWL:"Z$"
    };

    function fmt(n, min=2, max=6){
        if (n === null || !isFinite(n)) return '—';
        return Number(n).toLocaleString(undefined, {minimumFractionDigits:min, maximumFractionDigits:max});
    }

    function setStatus(text, ok=false){
        statusEl.textContent = text;
        dotEl.style.background = ok ? 'var(--ok)' : 'var(--warn)';
    }

    function setRateBadges(){
        if(rateINRtoTarget){
        r1El.textContent = `₹1 = ${currencySymbols[targetCurrency] || targetCurrency} ${fmt(rateINRtoTarget, 4, 6)}`;
        r2El.textContent = `${currencySymbols[targetCurrency] || targetCurrency} 1 = ₹${fmt(1/rateINRtoTarget, 2, 2)}`;
        } else {
        r1El.textContent = '—';
        r2El.textContent = '—';
        }
    }

    function updateConverted(from='INR'){
        if(!rateINRtoTarget) return;
        if(from === 'INR'){
        const inr = parseFloat(inrEl.value);
        if (!isNaN(inr)) {
            convertedEl.value = (inr * rateINRtoTarget).toFixed(2);
        } else {
            convertedEl.value = '';
        }
        } else {
        const val = parseFloat(convertedEl.value);
        if (!isNaN(val)) {
            inrEl.value = (val / rateINRtoTarget).toFixed(2);
        } else {
            inrEl.value = '';
        }
        }
    }

    async function fetchSymbols(){
        try{
        const res = await fetch('https://api.frankfurter.app/currencies');
        symbols = await res.json();
        const entries = Object.entries(symbols).sort((a,b)=>a[1].localeCompare(b[1]));
        currencyList.innerHTML = '';
        entries.forEach(([code, name]) => {
            const div = document.createElement('div');
            div.textContent = `${code} (${currencySymbols[code] || ''}) - ${name}`;
            div.dataset.code = code;
            if(code === 'USD'){
            currencySearch.value = div.textContent;
            currencyLabel.textContent = `${code} (${currencySymbols[code] || ''})`;
            }
            currencyList.appendChild(div);
        });
        targetCurrency = 'USD';
        fetchRate();
        }catch(e){
        console.error('Error fetching symbols', e);
        }
    }

    async function fetchRate(){
        setStatus('Fetching live rate…');
        refreshBtn.disabled = true;
        try{
        const res = await fetch(`https://api.frankfurter.app/latest?from=INR&to=${targetCurrency}`);
        const data = await res.json();
        const rate = data && data.rates && data.rates[targetCurrency];
        if(typeof rate === 'number' && isFinite(rate) && rate > 0){
            rateINRtoTarget = rate;
            srcEl.textContent = 'Source: European Central Bank (via Frankfurter API)';
            setRateBadges();
            setStatus('Live', true);
            updatedEl.textContent = new Date().toLocaleString();
            updateConverted();
        } else {
            setStatus('Error fetching rate');
        }
        }catch(err){
        setStatus('Error fetching rate');
        }
        refreshBtn.disabled = false;
    }

    inrEl.addEventListener('input', ()=>updateConverted('INR'));
    convertedEl.addEventListener('input', ()=>updateConverted('CUR'));

    currencySearch.addEventListener('focus', ()=>{
        currencyList.style.display = 'block';
    });
    currencySearch.addEventListener('input', ()=>{
        const val = currencySearch.value.toLowerCase();
        Array.from(currencyList.children).forEach(div=>{
        div.style.display = div.textContent.toLowerCase().includes(val)?'block':'none';
        });
    });

    document.addEventListener('click', (e)=>{
        if(!currencySearch.contains(e.target) && !currencyList.contains(e.target)){
        currencyList.style.display = 'none';
        }
    });

    currencyList.addEventListener('click', (e)=>{
        if(e.target.dataset.code){
        targetCurrency = e.target.dataset.code;
        currencyLabel.textContent = `${e.target.dataset.code} (${currencySymbols[e.target.dataset.code] || ''})`;
        currencySearch.value = e.target.textContent;
        currencyList.style.display = 'none';
        fetchRate();
        }
    });

    refreshBtn.addEventListener('click', fetchRate);

    fetchSymbols();
    setInterval(fetchRate, 60 * 1000);
  })();
  // --- End of Currency Converter Script ---
</script>
</body>
</html>